<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax로 파일 다운로드 및 setTimeout 사용방법</title>
<style>
.box{
width: 100px;
height: 30px;
color: white;
background-color: black;
text-align: center;
line-height: 30px;
font-size: 12px;
}
</style>
</head>
<body>
<div class="box" id="box"></div>
<input type="button" value="실행" onclick="gopage()">

<div id="ag">
</div>

<div id="ag2">
</div>
</body>
<script>
	var time = 5; //카운팅 숫자
function aaa(){
		document.getElementById("box").innerText = "광고중" + time + "초";
		time--; //-1씩 감소
		if(time >= 0){
			setTimeout(aaa, 1000); //해당 메소드를 재호출
		}
		else { //0이하가 되었을 경우 해당 단어로 오브젝트에 출력
			document.getElementById("box").innerText = "SKIP";
		}
		
	}
setTimeout(aaa, 1000); //페이지가 실행된 후 1초 후에 aaa 함수를 호출


function gopage(){
	var url = "http://naver.com";
	//setTimeout 함수에 추가적인 핸들링 이벤트가 발생하는 코드가 있을경우
	setTimeout(function(){
		location.href=url;
	}, 5000);
}
//setTimeout(gopage, 3000); //1000 = 1초, setTimeout: 해당 범위의 시간이 지난 후 작동되는 함수

//window onload: 페이지를 실행시키자마자 바로 작동되는 스크립트
window.onload = function(){
	//alert("test")
	var http = new XMLHttpRequest; //ajax 통신
	http.open("GET", "./realty/agree1.txt", false); //인코딩 주의 / GET 통신을 이용하여 해당 파일을 로드
	http2.send(); //통신을 진행
	document.getElementById("ag").innerHTML = http.response; //HTML에 내용을 출력
	
	var http2 = new XMLHttpRequest;
	http2.open("GET", "./realty/agree2.txt", false); //인코딩 주의
	http2.send(); //통신을 진행
	document.getElementById("ag2").innerHTML = http2.response;
	
}

</script>
</html>